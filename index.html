<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Ethics Simulation: Choose Your Path</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style id="app-style">
      body {
        font-family: "Inter", sans-serif;
        background-color: blue;
        color: #334155;
      }

      .avatar-option {
        cursor: pointer;
        transition: transform 0.2s, opacity 0.2s;
      }

      .avatar-option:hover {
        transform: scale(1.1);
        opacity: 0.9;
      }

      .avatar-option.selected {
        border: 3px solid #3b82f6;
        transform: scale(1.05);
      }

      .choice-btn {
        transition: all 0.2s;
      }

      .choice-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      .scenario-card {
        min-height: 280px;
      }

      .assistant-panel {
        min-height: 280px;
      }

      .journal-entry {
        border-left: 3px solid #3b82f6;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .loading {
        animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @media (max-width: 768px) {
        .main-container {
          flex-direction: column;
        }

        .scenario-card,
        .assistant-panel {
          width: 100%;
        }

        .journal-area {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          max-height: 50vh;
          z-index: 10;
          border-top-left-radius: 1rem;
          border-top-right-radius: 1rem;
          box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        }
      }
    </style>
  </head>
  <body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
      <header class="mb-6">
        <h1 class="text-3xl font-bold text-center mb-2 text-indigo-800">
          AI Ethics Simulation
        </h1>
        <p class="text-center text-gray-600 mb-6">
          Explore the implications of AI surveillance in education and workplace
          settings
        </p>

        <!-- Avatar Selector -->
        <div class="bg-white rounded-xl shadow-md p-4 mb-6">
          <h2 class="text-lg font-medium mb-3 text-gray-700">
            Choose your avatar
          </h2>
          <div class="flex flex-wrap justify-center gap-4">
            <div
              class="avatar-option w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center selected"
              data-avatar="default"
            >
              <i class="fas fa-user text-blue-500 text-2xl"></i>
            </div>
            <div
              class="avatar-option w-16 h-16 bg-green-100 rounded-full flex items-center justify-center"
              data-avatar="student"
            >
              <i class="fas fa-graduation-cap text-green-500 text-2xl"></i>
            </div>
            <div
              class="avatar-option w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center"
              data-avatar="worker"
            >
              <i class="fas fa-briefcase text-purple-500 text-2xl"></i>
            </div>
            <div
              class="avatar-option w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center"
              data-avatar="teacher"
            >
              <i class="fas fa-chalkboard-teacher text-yellow-600 text-2xl"></i>
            </div>
            <div
              class="avatar-option w-16 h-16 bg-red-100 rounded-full flex items-center justify-center"
              data-avatar="custom"
            >
              <i class="fas fa-plus text-red-500 text-2xl"></i>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content Area -->
      <main>
        <div class="main-container flex gap-6 mb-6">
          <!-- Scenario Card -->
          <div
            class="scenario-card bg-white rounded-xl shadow-md p-6 w-2/3 flex flex-col"
          >
            <div class="scenario-content flex-grow mb-6">
              <h2 class="text-xl font-semibold mb-4" id="scenario-title">
                Welcome to the Simulation
              </h2>
              <p class="text-gray-700 mb-4" id="scenario-text">
                You're about to experience different scenarios involving AI
                surveillance. Your choices will guide you through various
                ethical dilemmas and privacy considerations in educational and
                workplace environments. Choose your path wisely.
              </p>
            </div>
            <div class="scenario-choices space-y-3" id="choices-container">
              <button
                class="choice-btn w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-left"
                data-choice="1"
              >
                Begin as a student navigating AI monitoring in education
              </button>
              <button
                class="choice-btn w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-left"
                data-choice="2"
              >
                Start as a worker experiencing workplace surveillance
              </button>
            </div>
            <div
              id="loading-state"
              class="hidden loading flex-grow flex items-center justify-center"
            >
              <div class="text-center">
                <i
                  class="fas fa-circle-notch fa-spin text-indigo-600 text-3xl mb-2"
                ></i>
                <p class="text-gray-600">Loading your next scenario...</p>
              </div>
            </div>
          </div>

          <!-- AI Assistant Panel -->
          <div class="assistant-panel bg-white rounded-xl shadow-md p-6 w-1/3">
            <div class="flex items-center mb-4">
              <div
                class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3"
              >
                <i class="fas fa-robot text-indigo-600"></i>
              </div>
              <h2 class="text-lg font-semibold">AI Ethics Assistant</h2>
            </div>
            <div class="assistant-content" id="assistant-content">
              <p class="text-gray-700">
                I'll provide context and ethical implications for each choice
                you make throughout this simulation. After you make a decision,
                I'll explain the privacy and ethical considerations of your
                choices.
              </p>
            </div>
          </div>
        </div>

        <!-- Reflection Journal -->
        <div class="journal-area bg-white rounded-xl shadow-md overflow-hidden">
          <div
            class="journal-header bg-gray-50 p-4 flex justify-between items-center cursor-pointer"
            id="journal-toggle"
          >
            <h2 class="text-lg font-semibold text-gray-700">
              <i class="fas fa-book mr-2"></i> Reflection Journal
            </h2>
            <i
              class="fas fa-chevron-down text-gray-500"
              id="journal-chevron"
            ></i>
          </div>
          <div class="journal-content p-4" id="journal-content">
            <div class="mb-4">
              <textarea
                id="journal-input"
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none"
                rows="3"
                placeholder="Record your thoughts and reflections here..."
              ></textarea>
              <button
                id="save-journal"
                class="mt-2 py-2 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg"
              >
                Save Reflection
              </button>
            </div>
            <div class="journal-entries space-y-3" id="journal-entries">
              <!-- Journal entries will be added here -->
            </div>
          </div>
        </div>

        <!-- Restart Button -->
        <div class="text-center mt-8">
          <button
            id="restart-btn"
            class="py-2 px-6 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-lg inline-flex items-center"
          >
            <i class="fas fa-redo mr-2"></i> Restart Simulation
          </button>
        </div>
      </main>
    </div>

    <script id="app-script">
      // State management
      const state = {
        currentScenario: "intro",
        selectedAvatar: "default",
        journalEntries: [],
        journalVisible: true,
      };

      // DOM Elements
      const scenarioTitle = document.getElementById("scenario-title");
      const scenarioText = document.getElementById("scenario-text");
      const choicesContainer = document.getElementById("choices-container");
      const loadingState = document.getElementById("loading-state");
      const assistantContent = document.getElementById("assistant-content");
      const journalToggle = document.getElementById("journal-toggle");
      const journalChevron = document.getElementById("journal-chevron");
      const journalContent = document.getElementById("journal-content");
      const journalInput = document.getElementById("journal-input");
      const saveJournalBtn = document.getElementById("save-journal");
      const journalEntries = document.getElementById("journal-entries");
      const restartBtn = document.getElementById("restart-btn");
      const avatarOptions = document.querySelectorAll(".avatar-option");

      // Initialize the app
      function init() {
        // Load journal entries from localStorage
        loadJournalEntries();

        // Set up event listeners
        setupEventListeners();
      }

      // Setup event listeners
      function setupEventListeners() {
        // Avatar selection
        avatarOptions.forEach((option) => {
          option.addEventListener("click", function () {
            avatarOptions.forEach((opt) => opt.classList.remove("selected"));
            this.classList.add("selected");
            state.selectedAvatar = this.getAttribute("data-avatar");

            if (state.selectedAvatar === "custom") {
              // Here you could add a modal for custom avatar creation
              alert(
                "Custom avatar creation will be available in the full version."
              );
              this.classList.remove("selected");
              document
                .querySelector('[data-avatar="default"]')
                .classList.add("selected");
              state.selectedAvatar = "default";
            }
          });
        });

        // Scenario choices
        choicesContainer.addEventListener("click", function (e) {
          if (e.target.classList.contains("choice-btn")) {
            const choiceId = e.target.getAttribute("data-choice");
            handleChoice(choiceId);
          }
        });

        // Journal toggle
        journalToggle.addEventListener("click", function () {
          state.journalVisible = !state.journalVisible;
          journalContent.style.display = state.journalVisible
            ? "block"
            : "none";
          journalChevron.classList.toggle("fa-chevron-up");
          journalChevron.classList.toggle("fa-chevron-down");
        });

        // Save journal entry
        saveJournalBtn.addEventListener("click", saveJournalEntry);

        // Restart simulation
        restartBtn.addEventListener("click", restartSimulation);
      }

      // Handle user choice
      function handleChoice(choiceId) {
        // Show loading state
        scenarioContent = document.querySelector(".scenario-content");
        choicesContainer.style.display = "none";
        loadingState.style.display = "flex";

        // Simulate API call delay
        setTimeout(() => {
          // Call the Scenario Engine Loop (simulated)
          fetchNextScenario(state.currentScenario, choiceId)
            .then((scenarioData) => {
              // Update the scenario
              updateScenario(scenarioData);

              // Get explanation from the Explanation Generator Loop (simulated)
              return fetchExplanation(state.currentScenario, choiceId);
            })
            .then((explanationData) => {
              // Update the assistant panel
              updateAssistant(explanationData);

              // Hide loading state
              loadingState.style.display = "none";
              choicesContainer.style.display = "block";
            });
        }, 1500);
      }

      // Fetch next scenario (simulated API call)
      function fetchNextScenario(currentScenario, choiceId) {
        return new Promise((resolve) => {
          // This would be an actual API call in production
          const mockData = {
            id: "scenario1",
            title: "The Classroom Dilemma",
            text: "Your university has implemented an AI proctoring system for remote exams. The system requires access to your webcam, microphone, and monitors your eye movements and computer activity. Today is your first exam using this system.",
            choices: [
              {
                id: "1",
                text: "Comply with the system requirements to take the exam",
              },
              {
                id: "2",
                text: "Request an alternative assessment method due to privacy concerns",
              },
              {
                id: "3",
                text: "Research the data retention policies before deciding",
              },
            ],
          };

          resolve(mockData);
        });
      }

      // Fetch explanation (simulated API call)
      function fetchExplanation(scenarioId, choiceId) {
        return new Promise((resolve) => {
          // This would be an actual API call in production
          const mockData = {
            text: "This scenario explores the tension between academic integrity and personal privacy rights. AI proctoring technologies raise significant questions about data collection, consent, and potential discrimination issues. Your choice will navigate different aspects of digital surveillance ethics.",
          };

          resolve(mockData);
        });
      }

      // Update scenario display
      function updateScenario(scenarioData) {
        state.currentScenario = scenarioData.id;
        scenarioTitle.textContent = scenarioData.title;
        scenarioText.textContent = scenarioData.text;

        // Clear previous choices
        choicesContainer.innerHTML = "";

        // Add new choices
        scenarioData.choices.forEach((choice) => {
          const button = document.createElement("button");
          button.classList.add(
            "choice-btn",
            "w-full",
            "py-3",
            "px-4",
            "bg-indigo-600",
            "hover:bg-indigo-700",
            "text-white",
            "font-medium",
            "rounded-lg",
            "text-left"
          );
          button.setAttribute("data-choice", choice.id);
          button.textContent = choice.text;
          choicesContainer.appendChild(button);
        });
      }

      // Update assistant panel
      function updateAssistant(explanationData) {
        assistantContent.innerHTML = `<p class="text-gray-700">${explanationData.text}</p>`;
      }

      // Save journal entry
      function saveJournalEntry() {
        const entryText = journalInput.value.trim();
        if (entryText) {
          const timestamp = new Date();
          const entry = {
            text: entryText,
            timestamp: timestamp.toISOString(),
            scenarioId: state.currentScenario,
          };

          // Add to state
          state.journalEntries.push(entry);

          // Save to localStorage
          localStorage.setItem(
            "journalEntries",
            JSON.stringify(state.journalEntries)
          );

          // Add to display
          addJournalEntryToDisplay(entry);

          // Clear input
          journalInput.value = "";
        }
      }

      // Add journal entry to display
      function addJournalEntryToDisplay(entry) {
        const entryElement = document.createElement("div");
        entryElement.classList.add(
          "journal-entry",
          "p-3",
          "pl-4",
          "bg-gray-50",
          "rounded-lg"
        );

        const date = new Date(entry.timestamp);
        const formattedDate = `${date.toLocaleDateString()} at ${date.toLocaleTimeString(
          [],
          { hour: "2-digit", minute: "2-digit" }
        )}`;

        entryElement.innerHTML = `
        <div class="text-sm text-gray-500 mb-1">${formattedDate}</div>
        <p class="text-gray-700">${entry.text}</p>
      `;

        journalEntries.prepend(entryElement);
      }

      // Load journal entries from localStorage
      function loadJournalEntries() {
        const savedEntries = localStorage.getItem("journalEntries");
        if (savedEntries) {
          state.journalEntries = JSON.parse(savedEntries);
          state.journalEntries.forEach((entry) => {
            addJournalEntryToDisplay(entry);
          });
        }
      }

      // Restart simulation
      function restartSimulation() {
        if (
          confirm(
            "Are you sure you want to restart? This will clear your journal entries and reset the simulation."
          )
        ) {
          // Clear journal entries
          state.journalEntries = [];
          localStorage.removeItem("journalEntries");
          journalEntries.innerHTML = "";

          // Reset to initial state
          state.currentScenario = "intro";

          // Reset UI
          scenarioTitle.textContent = "Welcome to the Simulation";
          scenarioText.textContent =
            "You're about to experience different scenarios involving AI surveillance. Your choices will guide you through various ethical dilemmas and privacy considerations in educational and workplace environments. Choose your path wisely.";

          choicesContainer.innerHTML = `
          <button class="choice-btn w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-left" data-choice="1">
            Begin as a student navigating AI monitoring in education
          </button>
          <button class="choice-btn w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-left" data-choice="2">
            Start as a worker experiencing workplace surveillance
          </button>
        `;

          assistantContent.innerHTML = `
          <p class="text-gray-700">
            I'll provide context and ethical implications for each choice you make throughout this simulation. After you make a decision, I'll explain the privacy and ethical considerations of your choices.
          </p>
        `;
        }
      }

      // Initialize the app
      init();
    </script>
  </body>
</html>
